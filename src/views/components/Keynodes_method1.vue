<template>
  <div>
    <el-row>
      <h2>ä¸€ã€å…³é”®èŠ‚ç‚¹é€‰æ‹©ç»“æœ</h2>
      <div id="chart1" style="width:auto;height:600px;"></div>
      <div style="margin-left:25%;width:850px">
      <p style="font-size: 18px;font-weight:bold;">å±•ç¤ºè¯´æ˜</p>
      <p style="font-size: 18px">å®šä¹‰è¢«è½¬å‘æ•°â‰¥1ä¸”ç²‰ä¸æ•°>100çš„ç”¨æˆ·ä¸ºåˆæ ¼èŠ‚ç‚¹</p>
      <p style="font-size: 18px"></p>
        <p style="font-size: 18px"> æœ¬æ–¹æ³•èŠ‚ç‚¹é€‰æ‹©å‡†ç¡®ç‡ä¸ºï¼š72%</p></div>
    </el-row>
    <el-row>
      <h2>äºŒã€éš”ç¦»æ‰€é€‰å…³é”®èŠ‚ç‚¹åçš„ä»¿çœŸä¼ æ’­</h2>
      <el-col :span="12">
      <h2 style="text-align:center;">éš”ç¦»50ä¸ªæœ€ä¼˜èŠ‚ç‚¹åçš„ä»¿çœŸä¼ æ’­</h2>
        <div id="chart2" style="width:auto;height:600px;"></div>
      </el-col>
      <el-col :span="12">
      <h2 style="text-align:center;">ä¸å…¶å®ƒèŠ‚ç‚¹åº¦ç›¸è¿‘èŠ‚ç‚¹å¯¹æ¯”</h2>
        <div id="chart3" style="width:auto;height:600px;"></div>
      </el-col>
    </el-row>
    <el-row>
      <el-table
        :data="tableData1"
        border
        style="width: 100%">
        <el-table-column
          prop="ID"
          label="åºå·"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Number"
          label="èŠ‚ç‚¹æ•°ç›®"
          width="180">
        </el-table-column>
        <el-table-column
          prop="v"
          label="ğ›¥(ğ‘£)"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Node_degree"
          label="èŠ‚ç‚¹åº¦ä¹‹å’Œ"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Node_decrease"
          label="ä¼ æ’­èŠ‚ç‚¹å‡å°‘é‡"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Benefit_cost"
          label="æ”¶ç›Šæˆæœ¬æ¯”ç‡">
        </el-table-column>
      </el-table>
    </el-row>
    <el-row>
      <h2>ä¸‰ã€ç®—æ³•ç»¼åˆæ€§èƒ½è¯„ä¼°</h2>
      <el-table
        :data="tableData2"
        border
        style="width: 100%">
        <el-table-column
          prop="Method"
          label="èŠ‚ç‚¹é€‰æ‹©æ–¹æ³•"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Earnings"
          label="éš”ç¦»æ”¶ç›Š"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Costs"
          label="éš”ç¦»æˆæœ¬"
          width="180">
        </el-table-column>
        <el-table-column
          prop="Efficiency"
          label="æ•ˆç‡"
          width="180">
        </el-table-column>
      </el-table>
    </el-row>

  </div>
</template>

<script>

export default {

  data(){
    return{
      option1:'',
      myChart1:'',
      option2:'',
      myChart2:'',
      option3:'',
      myChart3:'',
      keynodes:'',
      connectioncase:'',

      tableData1: [
        {
        ID:'1',
        Number:'50(Q)',
        v:'+3.86',
        Node_degree:'144',
        Node_decrease:'116',
        Benefit_cost:0.81
      },
        {
      ID:'2',
      Number:'1(140)',
      v:'-1.88',
      Node_degree:'168',
      Node_decrease:'5',
      Benefit_cost:'0.03'
    },
        {
      ID:'3',
      Number:'1(302)',
      v:'-1.75',
      Node_degree:'143',
      Node_decrease:'6',
      Benefit_cost:'0.04'
    },
    {
      ID:'4',
      Number:'1(1088',
      v:'-1.58',
      Node_degree:'133',
      Node_decrease:'7',
      Benefit_cost:'0.05'
    },
    {
      ID:'5',
      Number:'1(123)',
      v:'-1.12',
      Node_degree:'72',
      Node_decrease:'35',
      Benefit_cost:'0.49',
    },],
      tableData2:[
        {
          Method:'DC',
          Earnings:'2599',
          Costs:'13355',
          Efficiency:'0.26'
        },
        {
          Method:'BC',
          Earnings:'1573',
          Costs:'10007',
          Efficiency:'0.15'
        },
        {
          Method:'CC',
          Earnings:'2918',
          Costs:'10777',
          Efficiency:'0.22'
        },

        {
          Method:'PageRank',
          Earnings:'2954',
          Costs:'12469',
          Efficiency:'0.24'
        },
        {
          Method:'DegreeDiscount',
          Earnings:'880',
          Costs:'1392',
          Efficiency:'0.63'
        },
        {
          Method:'æœ´ç´ è´ªå¿ƒç®—æ³•',
          Earnings:'1042',
          Costs:'5825',
          Efficiency:'0.18'
        },
        {
          Method:'æœ¬ç« æ–¹æ³•',
          Earnings:'116',
          Costs:'144',
          Efficiency:'0.81'
        },
      ]
    }
  },
  methods:{
    myEcharts1() {

      this.myChart1 = this.$echarts.init(document.getElementById('chart1'));
      this.myChart1.showLoading();

      this.myChart1.hideLoading();

        this.option1 = {
          legend: {
            data: [ ]
          },
          series: [{
            type: 'graph',
            layout: 'force',
            animation: false,
            label: {
              position: 'right',
              formatter: '{b}'
            },
            draggable: true,
            data: this.connectioncase.nodes.map(function (node, idx) {
              node.id = idx;
              return node;
            }),
            categories: this.connectioncase.categories,
            force: {
              edgeLength: 5,
              repulsion: 20,
              gravity: 0.2
            },
            edges: this.connectioncase.links
          }]
        };

        this.myChart1.setOption(this.option1);
      // console.log('æ£€æŸ¥chart1');



    },

    myEcharts2() {
      this.myChart2 = this.$echarts.init(document.getElementById('chart2'));
      function randomData(i) {
        now = new Date(+now +oneminute);

        return {
          name: now.toString(),
          value: [
            now,
            nodes[i]
          ]
        };
      }
      var nodes = this.keynodes.nodes;
      var data = [];
      var oneminute = 60000;
      var now = +new Date(2019, 9, 18,0,0);

      for (var i = 0; i < 4320; i++) {
        data.push(randomData(i));
      }

      this.option2 = {
        title: {
          text: 'éš”ç¦»50ä¸ªæœ€ä¼˜èŠ‚ç‚¹åçš„ä»¿çœŸä¼ æ’­'
        },
        tooltip: {
          trigger: 'axis',
          formatter: function (params) {
            params = params[0];
            var date = new Date(params.name);
            return date.getFullYear() + '/' + (date.getMonth() + 1) + '/'+ date.getDate() + '/' + date.getHours()  + '/' + date.getMinutes()+ ' : ' + params.value[1];
          },
          axisPointer: {
            animation: false
          }
        },
        xAxis: {
          name: 'æ—¶é—´',
          type: 'time',
          splitLine: {
            show: false
          }
        },
        yAxis: {
          name:'ä¼ æ’­èŠ‚ç‚¹çš„å‡å°‘é‡',
          type: 'value',
          boundaryGap: [0, '100%'],
          splitLine: {
            show: false
          }
        },
        series: [{
          name: 'æ¨¡æ‹Ÿæ•°æ®',
          type: 'line',
          showSymbol: false,
          hoverAnimation: false,
          data: data
        }]
      };
      this.myChart2.setOption(this.option2)

    },

    myEcharts3() {
      this.myChart3 = this.$echarts.init(document.getElementById('chart3'));
      function randomData1(n) {
        var time = new Date(then +n*oneminutes);

        return {
          name: time.toString(),
          value: [
            time,
            nodes1[n]
          ]
        };
      }
      function randomData2(j) {
        var time = new Date(then +j*oneminutes);

        return {
          name: time.toString(),
          value: [
            time,
            nodes2[j]
          ]
        };
      }
      function randomData3(k) {
        var time = new Date(then +k*oneminutes);

        return {
          name: time.toString(),
          value: [
            time,
            nodes3[k]
          ]
        };
      }
      function randomData4(l) {
        var time = new Date(then +l*oneminutes);

        return {
          name: time.toString(),
          value: [
            time,
            nodes4[l]
          ]
        };
      }

      var nodes1 =this.keynodes.nodes1;
      var nodes2 =this.keynodes.nodes2;
      var nodes3 =this.keynodes.nodes3;
      var nodes4 =this.keynodes.nodes4;

      var data1 = [];
      var oneminutes = 60000;
      var then = +new Date(2019, 9, 18,0,0);


      for (var n = 0; n < 4320; n++) {
        data1.push(randomData1(n));
      }

      var data2 = [];
      for (var j = 0; j < 4320; j++) {
        data2.push(randomData2(j));
      }

      var data3 = [];
      for (var k = 0; k < 4320; k++) {
        data3.push(randomData3(k));
      }

      var data4 = [];
      for (var l = 0; l < 4320; l++) {
        data4.push(randomData4(l));
      }

      this.option3 = {
        title: {
          text: 'å¯¹æ¯”å››ç»„èŠ‚ç‚¹éš”ç¦»ä»¿çœŸç»“æœ'
        },
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['èŠ‚ç‚¹123', 'èŠ‚ç‚¹1088','èŠ‚ç‚¹302', 'èŠ‚ç‚¹140']
        },
        xAxis: {
          name: 'æ—¶é—´',
          type: 'time',
          splitLine: {
            show: false
          },
          axisLine: {onZero: false}
        },
        yAxis: {
          name:'ä¼ æ’­èŠ‚ç‚¹çš„å‡å°‘é‡',
          type: 'value',
          boundaryGap: [0, '100%'],
          splitLine: {
            show: false
          }
        },
        series: [{
          name: 'èŠ‚ç‚¹123',
          type: 'line',
          showSymbol: false,
          hoverAnimation: false,
          data: data1
        },
          {
            name: 'èŠ‚ç‚¹1088',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: data2
          },
          {
            name: 'èŠ‚ç‚¹302',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: data3
          },
          {
            name: 'èŠ‚ç‚¹140',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: data4
          }
        ]
      };
      this.myChart3.setOption(this.option3)



    },





  },
  mounted() {

    this.keynodes = require('../../../static/Keynodes/nodes.json');
    this.connectioncase = require('../../../static/Keynodes/webkit-dep.json');
    this.myEcharts1();
    this.myEcharts2();
    this.myEcharts3();
    // console.log('æ£€æŸ¥');

  }
}
</script>
<style>
</style>

